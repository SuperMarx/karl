create table tagcategoryalias (
	id serial primary key,
	tagcategory_id int not null references tagcategory(id),
	name varchar not null
);

create unique index tagcategoryalias_namex on tagcategoryalias(name);

insert into tagcategoryalias (tagcategory_id, name)
	select
		tagcategory.id,
		tagcategory.name
	from
		tagcategory;

create table tagalias (
	id serial primary key,
	tag_id int not null references tag(id),
	tagcategory_id int references tagcategory(id),
	name varchar not null
);

create unique index tagalias_tagcategory_id_namex on tagalias(tagcategory_id, name);

insert into tagalias (tag_id, tagcategory_id, name)
	select
		tag.id,
		tag.tagcategory_id,
		tag.name
	from
		tag;
